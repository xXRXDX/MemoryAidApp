(function(){function read(k,d){try{return JSON.parse(localStorage.getItem(k))||d;}catch(e){return d;}}function write(k,v){localStorage.setItem(k,JSON.stringify(v));}function renderList(id,items){const c=document.getElementById(id); if(!c) return; c.innerHTML=''; items.forEach(t=>{const div=document.createElement('div');div.className='task-item';div.style.padding='10px';div.style.marginBottom='8px';div.style.borderRadius='8px';div.style.border='1px solid rgba(0,0,0,0.06)';div.style.cursor='pointer';div.dataset.id=t.id;div.innerHTML='<div style="font-weight:700">'+t.title+'</div><div class="small">'+(t.date? (t.date + (t.time? ' ' + t.time : '')) : 'No time')+'</div>';div.addEventListener('click',()=>{if(confirm('Start this mission?')){localStorage.setItem('stm_current_task',JSON.stringify(t));localStorage.setItem('stm_task_locked','1');window.location.href='focus-timer.html#start';}});c.appendChild(div);});}function renderAll(){try{var s=document.createElement('script');s.src='js/generate_quests.js';document.body.appendChild(s);}catch(e){}const daily=read('stm_daily',[]);const main=read('stm_main',[]);const side=read('stm_side',[]);renderList('daily-list',daily);renderList('main-list',main);renderList('side-list',side);const tasks=read('stm_tasks',[]);renderList('task-list',tasks);}document.addEventListener('DOMContentLoaded',renderAll);window.renderTaskUI=renderAll;})();